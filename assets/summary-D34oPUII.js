class d extends ui.view.DefaultTheme.SummaryUI{constructor(){super(),this.listSummary.renderHandler=Laya.Handler.create(this,this.renderSummary,null,!1),this.listSelectedTalents.renderHandler=Laya.Handler.create(this,this.renderTalent,null,!1),this.btnAgain.on(Laya.Event.CLICK,this,this.onAgain)}#e;#t;onAgain(){core.talentExtend(this.#e),core.times++,$ui.switchView(UI.pages.MAIN)}init({talents:e,enableExtend:t}){const{summary:r,lastExtendTalent:n}=core;this.#t=t,this.listSummary.array=[[core.PropertyTypes.HCHR,$lang.UI_Property_Charm],[core.PropertyTypes.HINT,$lang.UI_Property_Intelligence],[core.PropertyTypes.HSTR,$lang.UI_Property_Strength],[core.PropertyTypes.HMNY,$lang.UI_Property_Money],[core.PropertyTypes.HSPR,$lang.UI_Property_Spirit],[core.PropertyTypes.HAGE,$lang.UI_Final_Age],[core.PropertyTypes.SUM,$lang.UI_Total_Judge]].map(([l,s])=>{const a=r[l];return{label:`${s}${$lang.UI_Colon} ${a.value} ${$lang[a.judge]}`,grade:a.grade}}),e.sort(({id:l,grade:s},{id:a,grade:i})=>l==n?-1:a==n?1:i-s),this.#t?this.#e=e[0].id:this.#e=n,this.listSelectedTalents.array=e}renderSummary(e){const{label:t,grade:r}=e.dataSource;e.label=t,$_.deepMapSet(e,$ui.common.summary[r])}renderTalent(e){const t=e.dataSource;e.label=$_.format($lang.F_TalentSelection,t);const r=$ui.common.card[t.grade];$_.deepMapSet(e,t.id==this.#e?r.selected:r.normal),e.getChildByName("blank").pause=t.id!=this.#e,e.off(Laya.Event.CLICK,this,this.onSelectTalent),e.on(Laya.Event.CLICK,this,this.onSelectTalent,[t.id])}onSelectTalent(e){if(!this.#t)return $$event("message",["M_DisableExtendTalent"]);e==this.#e?this.#e=null:this.#e=e,this.listSelectedTalents.refresh()}}export{d as default};
