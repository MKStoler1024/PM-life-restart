class o extends ui.view.CyberTheme.CyberAchievementUI{constructor(){super(),this.btnBack.on(Laya.Event.CLICK,this,()=>$ui.switchView(UI.pages.MAIN));const e=Math.min(this.btnAchievement.fontSize,this.btnStatistics.fontSize),i=Math.max(this.btnAchievement.fontSize,this.btnStatistics.fontSize);this.#e={min:e,max:i},this.btnStatistics.on(Laya.Event.CLICK,this,()=>this.switch("statistics")),this.btnAchievement.on(Laya.Event.CLICK,this,()=>this.switch("achievement")),this.btnRank.on(Laya.Event.CLICK,this,$$event,["message",["M_NoRank"]]),this.listAchievements.renderHandler=new Laya.Handler(this,this.onRenderAchievement),this.listAchievements.scrollBar.elasticDistance=150,this.on(Laya.Event.RESIZE,this,()=>{this.boxPage.width=2*this.width,this.boxA.width=this.boxB.width=this.width,this.boxPage.x<0&&(this.boxPage.x=-this.width);const t=this.listAchievements?._itemRender?.props?.width;if(t){const s=Math.max(Math.floor((this.width-65)/t),1);this.listAchievements.width=s*t+(s-1)*(this.listAchievements.spaceY||0)+30}})}#e;#t;init(){this.switch("statistics",0);const{statistics:e,achievements:i,PropertyTypes:t}=core;this.listAchievements.array=i,this.labRemakeTimes.text=e[t.TMS].value,this.labRemakeTimesJudge.text=e[t.TMS].judge,this.labAchievementCountJudge.color=$ui.common.grade[e[t.TMS].grade],this.labAchievementCount.text=e[t.CACHV].value,this.labAchievementCountJudge.text=e[t.CACHV].judge,this.labAchievementCountJudge.color=$ui.common.grade[e[t.CACHV].grade],this.labEventRate.text=parseInt(e[t.REVT].value*100)+"%",this.prgEventRate.value=e[t.REVT].value,this.labTalentRate.text=parseInt(e[t.RTLT].value*100)+"%",this.prgTalentRate.value=e[t.RTLT].value}switch(e,i=300){switch(this.#t&&this.#t.forEach(t=>Laya.Tween.clear(t)),this.#t=[],e){case"statistics":i=-this.boxPage.x/this.width*i,this.#t.push(Laya.Tween.to(this.boxPage,{x:0},i,Laya.Ease.backOut,Laya.Handler.create(this,()=>this.#t=null)),Laya.Tween.to(this.btnStatistics,{fontSize:this.#e.max,anchorX:.5,anchorY:1},i,Laya.Ease.backOut),Laya.Tween.to(this.btnAchievement,{fontSize:this.#e.min,anchorX:.5,anchorY:1},i,Laya.Ease.backOut));break;case"achievement":i=(this.width+this.boxPage.x)/this.width*i,this.#t.push(Laya.Tween.to(this.boxPage,{x:-this.width},i,Laya.Ease.backOut,Laya.Handler.create(this,()=>this.#t=null)),Laya.Tween.to(this.btnStatistics,{fontSize:this.#e.min,anchorX:.5,anchorY:1},i,Laya.Ease.backOut),Laya.Tween.to(this.btnAchievement,{fontSize:this.#e.max,anchorX:.5,anchorY:1},i,Laya.Ease.backOut));break}}onRenderAchievement(e,i){const t=e.dataSource,s=e.getChildByName("name"),a=e.getChildByName("description"),h=e.getChildByName("completed"),n=e.getChildByName("uncomplete");t.isAchieved?(s.text=t.name,a.text=t.description,h.visible=!0,n.visible=!1):(s.text=t.hide?"???":t.name,a.text=t.hide?"???":t.description,h.visible=!1,n.visible=!0),e.colorFilter=$ui.gradeFilter(t.grade)}}export{o as default};
